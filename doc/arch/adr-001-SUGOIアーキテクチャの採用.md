# SUGOIアーキテクチャの採用
Date: 2021-11-27

## Status
承認

## Context
現状、IMAICHIアーキテクチャを採用しているが、オートスケールが不可能で可用性が悪く、稼働率が70%程度になってしまっているという課題がある。  
しかし、このSUGOIアーキテクチャを採用すれば、可用性を含めたパフォーマンスが大きく改善し、稼働率が99.9%になる上にランニングコストも50%程度下がることが見込まれる。  
[SUGOIアーキテクチャのスペック](リンクのURL)  
  
SUGOIアーキテクチャを採用した場合のデメリットとして考えられるのは、プロジェクトメンバーに半月~1ヶ月程度の学習コストが発生することである。  
来月に100個の新機能リリースを控えてる今の状況で採用した場合、スケジュールが破綻してしまう可能性がある。  
また、2ヶ月後に議題のSUGOIアーキテクチャの倍のパフォーマンスが期待できるYABAIアーキテクチャがリリースされるという情報もある。  
[YABAIアーキテクチャのPR記事](リンクのURL)  
  
上記の通り様々なことが検討されたが、ユーザーから稼働率に関する不満のフィードバックが多く、これがサービスとしての致命傷になリ得ると判断されたため、今回SUGOIアーキテクチャを採用することを決定した。  
  
## Decision
- 来月リリース予定の新機能のうち、優先度の高い新機能Aと新機能Bのリリース完了後にSUGOIアーキテクチャ導入作業に入ることとする
- 来月の10日になってプロジェクトメンバーのうち、2人が学習完了しなかった場合はSUGOIアーキテクチャの採用をいったん保留とする

## Conquences
SUGOIアーキテクチャを導入した結果、課題だった稼働率は99.9%になりユーザーからも稼働率に関しての不満がでることはなくなった。  
やはり、IMAICHIアーキテクトのIMAICHI機構は採用するべきではなく、SUGOIアーキテクチャにあるようなSUGOI機構が可用性の担保には重要であった。  
しかし、ランニングコストは想定よりも下がらず10%減にとどまったことと、スループットが旧アーキテクチャより下がってしまいコア機能の処理時間が増大してしまったことに関しては事前検証が甘かった。  
YABAIアーキテクチャの採用も検討したいところだが、その際は同じ轍を踏まないようにこれら点も精査して設計に臨みたい。